# --------------------------------------------------------
#  Copyright (C) 2004-2018 by EMGU Corporation. All rights reserved.
# --------------------------------------------------------

PROJECT(Emgu.TF.Models)

INSTALL(
  DIRECTORY
  ${CMAKE_CURRENT_SOURCE_DIR}
  DESTINATION .
  COMPONENT emgutf_source
	FILES_MATCHING 
	PATTERN "*.cs"
	PATTERN "*.projitems"
	PATTERN "*.shproj"
	PATTERN "*.csproj"
	PATTERN ".svn" EXCLUDE
	PATTERN "obj" EXCLUDE
	PATTERN "CMakeFiles" EXCLUDE
	PATTERN "x64" EXCLUDE #exclude build artifacts from Visual Studio build process
	PATTERN "${PROJECT_NAME}.dir" EXCLUDE
)

FILE(GLOB SRC_EMGU_TF_MODEL RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "*.cs")

LIST(APPEND SRC_EMGU_TF_MODEL ${CMAKE_CURRENT_SOURCE_DIR}/../CommonAssemblyInfo.cs)
LIST(APPEND SRC_EMGU_TF_MODEL ${CMAKE_CURRENT_SOURCE_DIR}/Emgu.TF.Models/Properties/AssemblyInfo.cs)

#SET(EMGU_TF_REFERENCE -r:System.Net.Http.dll)
#IF(HAVE_WINDESKTOP_X64) 
#  LIST(APPEND EMGU_TF_REFERENCE -r:System.IO.dll -r:"${LIBRARY_OUTPUT_PATH}/Emgu.TF.World.dll")
#ENDIF()
#IF(APPLE AND HAVE_OSX)
#  LIST(APPEND EMGU_TF_REFERENCE -r:"${LIBRARY_OUTPUT_PATH}/osx/Emgu.TF.World.OSX.dll")
#ENDIF()


IF(APPLE AND HAVE_OSX)
  #ADD_DEPENDENCIES(${PROJECT_NAME} Emgu.TF.World)
ENDIF()

IF(HAVE_WINDESKTOP_X86 OR HAVE_WINDESKTOP_X64)

  BUILD_CSPROJ(${PROJECT_NAME} "${CMAKE_CURRENT_SOURCE_DIR}/Emgu.TF.Models/Emgu.TF.Models.csproj" "" ALL)

#LIST(APPEND CS_FLAGS ${EMGU_TF_REFERENCE} )
#GENERATE_DOCUMENT(${LIBRARY_OUTPUT_PATH}/${PROJECT_NAME})
#SIGN_ASSEMBLY(${CMAKE_CURRENT_SOURCE_DIR}/../Emgu.TF.snk)
#SET_CS_TARGET_FRAMEWORK(${CSC_TARGET_FRAMEWORK})
#COMPILE_CS(${PROJECT_NAME} "library" "${SRC_EMGU_TF_MODEL}" ALL)

  INSTALL(
  FILES 
  ${LIBRARY_OUTPUT_PATH}/${PROJECT_NAME}.xml
  ${LIBRARY_OUTPUT_PATH}/${PROJECT_NAME}.dll 
  DESTINATION ${CPACK_PACKAGE_CLI_FOLDER}
  COMPONENT emgutf_binary)

  ADD_DEPENDENCIES(${PROJECT_NAME} Emgu.TF.World)
ENDIF()